Hoàn thiện các phương thức và tests.