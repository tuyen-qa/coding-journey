class Node{ constructor(k,v){ this.k=k; this.v=v; this.p=this.n=null; } } export class LRU{ constructor(cap){ this.cap=cap; this.map=new Map(); this.h=new Node(0,0); this.t=new Node(0,0); this.h.n=this.t; this.t.p=this.h; } _add(x){ x.n=this.h.n; x.p=this.h; this.h.n.p=x; this.h.n=x; } _rm(x){ x.p.n=x.n; x.n.p=x.p; } get(k){ const x=this.map.get(k); if(!x) return -1; this._rm(x); this._add(x); return x.v; } put(k,v){ if(this.map.has(k)){ const x=this.map.get(k); x.v=v; this._rm(x); this._add(x); return; } const x=new Node(k,v); this.map.set(k,x); this._add(x); if(this.map.size>this.cap){ const y=this.t.p; this._rm(y); this.map.delete(y.k); } } }