class DSU{ constructor(n){ this.p=Array.from({length:n},(_,i)=>i); this.r=Array(n).fill(0); this.c=n;} f(x){ return this.p[x]===x?x:(this.p[x]=this.f(this.p[x])); } u(a,b){ a=this.f(a); b=this.f(b); if(a===b) return false; if(this.r[a]<this.r[b]) [a,b]=[b,a]; this.p[b]=a; if(this.r[a]===this.r[b]) this.r[a]++; this.c--; return true; } } export const countComponents=(n,edges)=>{ const d=new DSU(n); for(const [u,v] of edges) d.u(u,v); return d.c; }